<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Materials Project Database Validation: mgvv &#8212; pymatgen-db 2023.7.18 documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/flasky.css" />
    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/sphinx_highlight.js"></script>
    <link rel="icon" href="_static/favicon.ico"/>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Database “Builders”" href="builders.html" />
    <link rel="prev" title="Pymatgen-db" href="index.html" />

   
  
  <link media="only screen and (max-device-width: 480px)" href="_static/small_flask.css" type= "text/css" rel="stylesheet" />
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9">

<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-38991557-1']);
  _gaq.push(['_trackPageview']);
</script>

  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="builders.html" title="Database “Builders”"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="index.html" title="Pymatgen-db"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">pymatgen-db 2023.7.18 documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Materials Project Database Validation: mgvv</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="materials-project-database-validation-mgvv">
<h1>Materials Project Database Validation: mgvv<a class="headerlink" href="#materials-project-database-validation-mgvv" title="Permalink to this heading">¶</a></h1>
<p>The command-line program, <cite>mgvv</cite>, is used to validate MongoDB databases. This command has two sub-commands:</p>
<ol class="arabic simple">
<li><p><a class="reference internal" href="#mgvv-validate"><span class="std std-ref">mgvv validate</span></a> - Filter records on a set of criteria (conjunction) and apply a set of constraints.</p></li>
<li><p><a class="reference internal" href="#mgvv-diff"><span class="std std-ref">mgvv diff</span></a> - Look at the “diff” of any two collections, for identifiers that are missing from one or the other, or for mis-matching values for identifiers that are the same.</p></li>
</ol>
<section id="mgvv-validate-subcommand">
<span id="mgvv-validate"></span><h2>mgvv validate subcommand<a class="headerlink" href="#mgvv-validate-subcommand" title="Permalink to this heading">¶</a></h2>
<p>Database connections are configured from a file, exactly as for <cite>mgdb</cite>/
The patterns to validate against can come from a file or the command-line.</p>
</section>
<section id="arguments">
<h2>Arguments<a class="headerlink" href="#arguments" title="Permalink to this heading">¶</a></h2>
<p>Constraints can be provided on the command line.
The syntax of each constraint is given in <a class="reference internal" href="#constraint-syntax"><span class="std std-ref">Constraint syntax</span></a>.
It is usually wise to quote the constraints so that the operators are not
interpreted by the Unix shell. The constraints can be listed as separate quoted arguments
or a single quoted argument using commas. For example, the following two command-lines are
equivalent:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">mgvv</span> <span class="p">[</span><span class="n">options</span><span class="p">]</span> <span class="s1">&#39;nelements &gt; 1&#39;</span> <span class="s1">&#39;e_above_hull &gt;= 0&#39;</span>
<span class="n">mgvv</span> <span class="p">[</span><span class="n">options</span><span class="p">]</span> <span class="s1">&#39;nelements &gt; 1, e_above_hull &gt;= 0&#39;</span>
</pre></div>
</div>
<p>The validation constraints could also be configured from a file using the
<cite>–file</cite> option, as described below.</p>
</section>
<section id="options">
<h2>Options<a class="headerlink" href="#options" title="Permalink to this heading">¶</a></h2>
<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-mgvv-help">
<span id="cmdoption-mgvv-h"></span><span class="sig-name descname"><span class="pre">--help</span></span><span class="sig-prename descclassname"></span><span class="sig-prename descclassname"><span class="pre">,</span> </span><span class="sig-name descname"><span class="pre">-h</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-mgvv-help" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>show help message and exit</p>
<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-mgvv-alias">
<span id="cmdoption-mgvv-a"></span><span class="sig-name descname"><span class="pre">--alias</span></span><span class="sig-prename descclassname"></span><span class="sig-prename descclassname"><span class="pre">,</span> </span><span class="sig-name descname"><span class="pre">-a</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-mgvv-alias" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>Value is an alias for a field used in a constraint or condition,
in form alias=name_in_db. This option is repeatable to allow multiple
aliases.</p>
<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-mgvv-collection">
<span id="cmdoption-mgvv-C"></span><span class="sig-name descname"><span class="pre">--collection</span></span><span class="sig-prename descclassname"></span><span class="sig-prename descclassname"><span class="pre">,</span> </span><span class="sig-name descname"><span class="pre">-C</span></span><span class="sig-prename descclassname"> <span class="pre">&lt;name&gt;</span></span><a class="headerlink" href="#cmdoption-mgvv-collection" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>Name of collection on which to operate.</p>
<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-mgvv-email">
<span id="cmdoption-mgvv-e"></span><span class="sig-name descname"><span class="pre">--email</span></span><span class="sig-prename descclassname"></span><span class="sig-prename descclassname"><span class="pre">,</span> </span><span class="sig-name descname"><span class="pre">-e</span></span><span class="sig-prename descclassname"> <span class="pre">&lt;file</span> <span class="pre">or</span> <span class="pre">spec&gt;</span></span><a class="headerlink" href="#cmdoption-mgvv-email" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>Email a report.
The sender, server, and recipients can be specified either in a configuration file, or
on the command line in the format “{from}:{to}[:server]”.
The “from” and “to” are required; default server is localhost.
If a file path is given (i.e. the option does not have a ‘:’ in it),
then the format is JSON/YAML and the specification should be given
under the “_email” key, which should be a mapping with keys
“from”, “to”, and “server”. For example the following commandline uses localhost:9101 to send mail:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">mgvv</span> <span class="p">[</span><span class="n">options</span><span class="p">]</span> <span class="o">--</span><span class="n">email</span> <span class="n">dkgunter</span><span class="nd">@lbl</span><span class="o">.</span><span class="n">gov</span><span class="p">:</span><span class="n">somebody</span><span class="nd">@host</span><span class="o">.</span><span class="n">org</span><span class="p">:</span><span class="n">localhost</span><span class="p">:</span><span class="mi">9101</span>
</pre></div>
</div>
<p>See <a class="reference internal" href="#email-config">email-config</a> for an example of the configuration file syntax, which unlike the
command-line syntax allows for multiple recipients.</p>
<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-mgvv-f">
<span id="cmdoption-mgvv-file"></span><span class="sig-name descname"><span class="pre">-f</span></span><span class="sig-prename descclassname"> <span class="pre">&lt;file&gt;</span></span><span class="sig-prename descclassname"><span class="pre">,</span> </span><span class="sig-name descname"><span class="pre">--file</span></span><span class="sig-prename descclassname"> <span class="pre">&lt;file&gt;</span></span><a class="headerlink" href="#cmdoption-mgvv-f" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>Main configuration file. Has constraints, and optionally email configuration
(see <cite>–email</cite> option).</p>
<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-mgvv-limit">
<span id="cmdoption-mgvv-m"></span><span class="sig-name descname"><span class="pre">--limit</span></span><span class="sig-prename descclassname"> <span class="pre">&lt;num&gt;</span></span><span class="sig-prename descclassname"><span class="pre">,</span> </span><span class="sig-name descname"><span class="pre">-m</span></span><span class="sig-prename descclassname"> <span class="pre">&lt;num&gt;</span></span><a class="headerlink" href="#cmdoption-mgvv-limit" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>In output, limit number of displayed validation errors, per collection, to <cite>num</cite>.
The default is 50. To show as many errors as you can find, use 0.</p>
<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-mgvv-format">
<span id="cmdoption-mgvv-F"></span><span class="sig-name descname"><span class="pre">--format</span></span><span class="sig-prename descclassname"> <span class="pre">&lt;type&gt;</span></span><span class="sig-prename descclassname"><span class="pre">,</span> </span><span class="sig-name descname"><span class="pre">-F</span></span><span class="sig-prename descclassname"> <span class="pre">&lt;type&gt;</span></span><a class="headerlink" href="#cmdoption-mgvv-format" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>Use the specified report type to format and send the validation output.
Recognized types are:</p>
<dl class="simple">
<dt>html</dt><dd><p>A simple HTML report, with some minimal CSS styling. This is
arguably the most visually pleasing format. <em>Default</em></p>
</dd>
<dt>json</dt><dd><p>A JSON document (indented).</p>
</dd>
<dt>md</dt><dd><p>Markdown with an embedded fixed-width table. This is the easiest format
to read from the console.</p>
</dd>
</dl>
<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-mgvv-c">
<span id="cmdoption-mgvv-config"></span><span class="sig-name descname"><span class="pre">-c</span></span><span class="sig-prename descclassname"> <span class="pre">&lt;file&gt;</span></span><span class="sig-prename descclassname"><span class="pre">,</span> </span><span class="sig-name descname"><span class="pre">--config</span></span><span class="sig-prename descclassname"> <span class="pre">&lt;file&gt;</span></span><a class="headerlink" href="#cmdoption-mgvv-c" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>Configuration file for database connection. Generate one using <cite>mgdb init –config filename.json</cite>, if necessary. Otherwise, the code searches for a db.json.  If none is found, a no-authentication localhost:27017/vasp database is assumed.</p>
<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-mgvv-v">
<span id="cmdoption-mgvv-verbose"></span><span class="sig-name descname"><span class="pre">-v</span></span><span class="sig-prename descclassname"></span><span class="sig-prename descclassname"><span class="pre">,</span> </span><span class="sig-name descname"><span class="pre">--verbose</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-mgvv-v" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>Increase log message verbosity. Repeatable. Messages are logged to standard error.</p>
</section>
<section id="configuration-files">
<span id="id1"></span><h2>Configuration files<a class="headerlink" href="#configuration-files" title="Permalink to this heading">¶</a></h2>
<p>You can use up to two configuration files: one for constraints (and aliases), one for
the database, and one for the constraints and email.</p>
<section id="database-configuration">
<span id="db-config"></span><h3>Database configuration<a class="headerlink" href="#database-configuration" title="Permalink to this heading">¶</a></h3>
<p>The database connection uses the same format as the <cite>mgdb</cite> command for
its <a class="reference internal" href="dbconfig.html"><span class="doc">configuration file</span></a>. The <cite>readonly_user</cite> is preferred over the
administrative user, if both are present.</p>
</section>
<section id="email-configuration">
<span id="email-config"></span><h3>Email configuration<a class="headerlink" href="#email-configuration" title="Permalink to this heading">¶</a></h3>
<p>Reports can be sent by email. This can be configured on the command-line,
or within the main configuration file.</p>
<p>Here is an example configuration:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">_email</span><span class="p">:</span>
<span class="w">  </span><span class="nt">from</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">you@host.org</span>
<span class="w">  </span><span class="nt">to</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">you@host.org</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">othersucker@host.otherorg</span>
</pre></div>
</div>
<p>The section for email must always be named <cite>_email</cite>.
The purpose of the <cite>_email</cite> key is to make it easy to embed this information into
the configuration file used for the constraints (the <cite>–file</cite> option).
The following keywords are recognized:</p>
<dl class="simple">
<dt>from</dt><dd><p>Sender email, as a string. Required.</p>
</dd>
<dt>to</dt><dd><p>Recipients of the email. If a single one, a string; if multiple, a list of strings. Required.</p>
</dd>
<dt>server</dt><dd><p>Email server address. Use ‘localhost’ if none is given. Optional.</p>
</dd>
<dt>port</dt><dd><p>Email server port. Use default SMTP port if none is given. Optional.</p>
</dd>
</dl>
</section>
<section id="constraint-configuration">
<span id="constraint-config"></span><h3>Constraint configuration<a class="headerlink" href="#constraint-configuration" title="Permalink to this heading">¶</a></h3>
<p>The constraints are configured from a YAML file.</p>
<p>At the top level are keys, which are the names of the collection
on which to apply the constraints. The specification of the constraints in
each collection takes two possible forms, simple and complex. In both cases
the syntax of the constraints is the same, see <a class="reference internal" href="#constraint-syntax"><span class="std std-ref">Constraint syntax</span></a>.</p>
<p><strong>Simple</strong>: A list of constraints, which are simply combined. Any document in the collection that violates any of the constraints will generate a validation error.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">collection_name</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">field1 &lt;= value</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">field2 &gt; value</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="c1"># ..etc..</span>
</pre></div>
</div>
<p><strong>Complex</strong>: An initial filter, given as a map with an <cite>filter</cite> key, and
a set of constraints under the <cite>constraints</cite> key.
The <cite>filter</cite> key selects records for applying the constraints.
The <cite>constraints</cite> key provides the list of constraints associated with that condition.
As in the simple format, any document in the collection
that violates any of the constraints will generate a validation error.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">mycollection</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span>
<span class="w">        </span><span class="nt">filter</span><span class="p">:</span>
<span class="w">            </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">field1 = &#39;negatory&#39;</span>
<span class="w">        </span><span class="nt">constraints</span><span class="p">:</span>
<span class="w">            </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">field2 &lt;= value</span>
<span class="w">            </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">field3 &gt; value</span>
<span class="w">            </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="c1"># ..etc..</span>
<span class="w">    </span><span class="p p-Indicator">-</span>
<span class="w">        </span><span class="nt">filter</span><span class="p">:</span>
<span class="w">            </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">field1 = &#39;excellent&#39;</span>
<span class="w">            </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">field4 &gt; 0</span>
<span class="w">        </span><span class="nt">then</span><span class="p">:</span>
<span class="w">            </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">field5 &lt; value</span>
<span class="w">            </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="c1"># ..etc..</span>
</pre></div>
</div>
<p>As shown in the second constraint block above, there may also be a
list of conditions for the <cite>filter</cite>.
All of these conditions must be true for the record
to pass the filter and be evaluated according to the constraints.</p>
<p><strong>Aliases</strong> can be defined (these operate across all collections, for better or worse, at the moment).
Constraints that use these aliases will automatically be converted to the aliased name before the query
is submitted to the database. The aliases are simply a list in the format “name = value”
in a section called <cite>_aliases</cite>, as shown below.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">_aliases</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">snl_id = mps_id</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">energy = analysis.e_above_hull</span>
</pre></div>
</div>
<p><strong>Partial arrays</strong> can be fetched, which is very useful for not spending a ton of bandwidth, by adding <cite>/&lt;path&gt;</cite>
after the name of the field. For example:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">collection_name</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">calculations/density size 2</span>
</pre></div>
</div>
<p>If, for exampe, the <cite>calculations</cite> array was full of large sub-arrays
this would save a lot of bandwidth by only
retrieving that <cite>density</cite> values for each array item.
By default, the arrays are sliced to only retrieve enough elements
to test against the condition, but this may not be sufficiently efficient for cases where each sub-element is very large.
Note that this only applies to constraints that use the ‘size’ family of array operators.</p>
</section>
</section>
<section id="constraint-syntax">
<span id="id2"></span><h2>Constraint syntax<a class="headerlink" href="#constraint-syntax" title="Permalink to this heading">¶</a></h2>
<p>The constraint syntax is taken from the <a class="reference external" href="http://pythonhosted.org/smoqe/">smoqe package</a>.</p>
</section>
<section id="mgvv-diff-subcommand">
<span id="mgvv-diff"></span><h2>mgvv diff subcommand<a class="headerlink" href="#mgvv-diff-subcommand" title="Permalink to this heading">¶</a></h2>
<p>The <cite>diff</cite> sub-command takes options and two DB configurations:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">mgvv</span> <span class="n">diff</span> <span class="p">[</span><span class="n">options</span><span class="o">..</span><span class="p">]</span> <span class="n">old</span><span class="o">.</span><span class="n">json</span> <span class="n">new</span><span class="o">.</span><span class="n">json</span>
</pre></div>
</div>
<p>The command provides a convenient command-line interface to take the difference
of two MongoDB database collections.
Database connections are configured from JSON files,
exactly as for <cite>mgdb</cite>.
See the <a class="reference internal" href="#mgvv-diff-examples"><span class="std std-ref">examples</span></a> at the end of this section for full usage examples.</p>
</section>
<section id="id3">
<h2>Arguments<a class="headerlink" href="#id3" title="Permalink to this heading">¶</a></h2>
<p>Two positional arguments are required, to set the two collections.
These are called the <cite>old</cite> and <cite>new</cite> collections, respectively. Both
are configured using a pymatgen-db JSON config file.</p>
<p>For an unauthenticated database, we only need 3 keys:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;host&quot;</span> <span class="p">:</span> <span class="s2">&quot;myhost&quot;</span><span class="p">,</span>
    <span class="s2">&quot;database&quot;</span><span class="p">:</span> <span class="s2">&quot;mydatabase&quot;</span><span class="p">,</span>
    <span class="s2">&quot;collection&quot;</span><span class="p">:</span> <span class="s2">&quot;mycollection&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>For an authenticated database, <cite>user</cite> and <cite>password</cite> (or <cite>readonly_user</cite> and <cite>readonly_password</cite>,
or <cite>admin_user</cite> and <cite>admin_password</cite>) are required:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;host&quot;</span> <span class="p">:</span> <span class="s2">&quot;myhost&quot;</span><span class="p">,</span>
    <span class="s2">&quot;database&quot;</span><span class="p">:</span> <span class="s2">&quot;mydatabase&quot;</span><span class="p">,</span>
    <span class="s2">&quot;collection&quot;</span><span class="p">:</span> <span class="s2">&quot;mycollection&quot;</span><span class="p">,</span>
    <span class="s2">&quot;user&quot;</span><span class="p">:</span> <span class="s2">&quot;me&quot;</span><span class="p">,</span>
    <span class="s2">&quot;password&quot;</span><span class="p">:</span> <span class="s2">&quot;let-me-in&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
<section id="id4">
<h2>Options<a class="headerlink" href="#id4" title="Permalink to this heading">¶</a></h2>
<p>usage: mgvv diff [-h] [–verbose] [-D CONFIG] [-E ADDR] [-f FILE] [-F FORMAT] [-s HOST] [-i INFO] [-k KEY] [-m] [-n EXPR] [-p PROPERTIES] [-P] [-q EXPR] [-u URL] [-V] old new</p>
<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-mgvv-diff-help">
<span id="cmdoption-mgvv-diff-h"></span><span class="sig-name descname"><span class="pre">--help</span></span><span class="sig-prename descclassname"></span><span class="sig-prename descclassname"><span class="pre">,</span> </span><span class="sig-name descname"><span class="pre">-h</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-mgvv-diff-help" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>show help message and exit</p>
<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-mgvv-diff-v">
<span id="cmdoption-mgvv-diff-verbose"></span><span class="sig-name descname"><span class="pre">-v</span></span><span class="sig-prename descclassname"></span><span class="sig-prename descclassname"><span class="pre">,</span> </span><span class="sig-name descname"><span class="pre">--verbose</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-mgvv-diff-v" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>Increase log message verbosity. Repeatable. Messages are logged to standard error.</p>
<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-mgvv-diff-D">
<span id="cmdoption-mgvv-diff-db"></span><span class="sig-name descname"><span class="pre">-D</span></span><span class="sig-prename descclassname"> <span class="pre">CONFIG</span></span><span class="sig-prename descclassname"><span class="pre">,</span> </span><span class="sig-name descname"><span class="pre">--db</span></span><span class="sig-prename descclassname"> <span class="pre">CONFIG</span></span><a class="headerlink" href="#cmdoption-mgvv-diff-D" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>Insert a JSON record of the report in the MongoDB collection pointed to by
CONFIG, which is a standard pymatgen-db JSON configuration file. Note that
the target database and collection must be writable.</p>
<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-mgvv-diff-E">
<span id="cmdoption-mgvv-diff-email"></span><span class="sig-name descname"><span class="pre">-E</span></span><span class="sig-prename descclassname"> <span class="pre">ADDR</span></span><span class="sig-prename descclassname"><span class="pre">,</span> </span><span class="sig-name descname"><span class="pre">--email</span></span><span class="sig-prename descclassname"> <span class="pre">ADDR</span></span><a class="headerlink" href="#cmdoption-mgvv-diff-E" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>Email report to one or more email addresses. ADDR is a list of the form:
‘<code class="docutils literal notranslate"><span class="pre">sender/receiver,[receiver2...][/subject]</span></code>’.</p>
<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-mgvv-diff-s">
<span id="cmdoption-mgvv-diff-email-server"></span><span class="sig-name descname"><span class="pre">-s</span></span><span class="sig-prename descclassname"> <span class="pre">HOST</span></span><span class="sig-prename descclassname"><span class="pre">,</span> </span><span class="sig-name descname"><span class="pre">--email-server</span></span><span class="sig-prename descclassname"> <span class="pre">HOST</span></span><a class="headerlink" href="#cmdoption-mgvv-diff-s" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>Server HOST for an email report, in form hostname[:port]. Default is localhost</p>
<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-mgvv-diff-f">
<span id="cmdoption-mgvv-diff-file"></span><span class="sig-name descname"><span class="pre">-f</span></span><span class="sig-prename descclassname"> <span class="pre">FILE</span></span><span class="sig-prename descclassname"><span class="pre">,</span> </span><span class="sig-name descname"><span class="pre">--file</span></span><span class="sig-prename descclassname"> <span class="pre">FILE</span></span><a class="headerlink" href="#cmdoption-mgvv-diff-f" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>Read options from FILE instead of command line. File format is YAML (or JSON,
a subset), with the long option names as keys. Any time the command-line
option takes a comma-separated list, the config file uses a real list;
command-line key/value pair lists become config file mappings.</p>
<p>For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Command</span><span class="o">-</span><span class="n">line</span>                    <span class="n">Config</span> <span class="n">file</span>
<span class="o">============</span>                    <span class="o">==============</span>
<span class="o">--</span><span class="n">numeric</span><span class="o">=</span><span class="s1">&#39;x=+-1.5,y=+-0.5&#39;</span>     <span class="n">numeric</span><span class="p">:</span>
                                   <span class="n">x</span><span class="p">:</span> <span class="s1">&#39;+-1.5&#39;</span>
                                   <span class="n">y</span><span class="p">:</span> <span class="s1">&#39;+-0.5&#39;</span>

 <span class="o">--</span><span class="n">info</span><span class="o">=</span><span class="n">foo</span><span class="p">,</span><span class="n">bar</span>                <span class="n">info</span><span class="p">:</span>
                                   <span class="o">-</span> <span class="n">foo</span>
                                   <span class="o">-</span> <span class="n">bar</span>
</pre></div>
</div>
<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-mgvv-diff-F">
<span id="cmdoption-mgvv-diff-format"></span><span class="sig-name descname"><span class="pre">-F</span></span><span class="sig-prename descclassname"> <span class="pre">FORMAT</span></span><span class="sig-prename descclassname"><span class="pre">,</span> </span><span class="sig-name descname"><span class="pre">--format</span></span><span class="sig-prename descclassname"> <span class="pre">FORMAT</span></span><a class="headerlink" href="#cmdoption-mgvv-diff-F" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>Default report format: ‘text’, ‘html’, or ‘json’. If not given, the format will be determined by the output: text for console, html for email.</p>
<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-mgvv-diff-i">
<span id="cmdoption-mgvv-diff-info"></span><span class="sig-name descname"><span class="pre">-i</span></span><span class="sig-prename descclassname"> <span class="pre">INFO</span></span><span class="sig-prename descclassname"><span class="pre">,</span> </span><span class="sig-name descname"><span class="pre">--info</span></span><span class="sig-prename descclassname"> <span class="pre">INFO</span></span><a class="headerlink" href="#cmdoption-mgvv-diff-i" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>Extra fields for records, as comma-separated list, e.g ‘<code class="docutils literal notranslate"><span class="pre">extra,fields,to_include</span></code>’.</p>
<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-mgvv-diff-k">
<span id="cmdoption-mgvv-diff-key"></span><span class="sig-name descname"><span class="pre">-k</span></span><span class="sig-prename descclassname"> <span class="pre">KEY</span></span><span class="sig-prename descclassname"><span class="pre">,</span> </span><span class="sig-name descname"><span class="pre">--key</span></span><span class="sig-prename descclassname"> <span class="pre">KEY</span></span><a class="headerlink" href="#cmdoption-mgvv-diff-k" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>Key for matching records.</p>
<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-mgvv-diff-m">
<span id="cmdoption-mgvv-diff-missing"></span><span class="sig-name descname"><span class="pre">-m</span></span><span class="sig-prename descclassname"></span><span class="sig-prename descclassname"><span class="pre">,</span> </span><span class="sig-name descname"><span class="pre">--missing</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-mgvv-diff-m" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>Only report keys that are in the ‘old’ collection, but not in the ‘new’ collection.</p>
<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-mgvv-diff-n">
<span id="cmdoption-mgvv-diff-numeric"></span><span class="sig-name descname"><span class="pre">-n</span></span><span class="sig-prename descclassname"></span><span class="sig-prename descclassname"><span class="pre">,</span> </span><span class="sig-name descname"><span class="pre">--numeric</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-mgvv-diff-n" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>Fields with numeric values that must match, with a tolerance, as a comma-separated list, e.g.,
<code class="docutils literal notranslate"><span class="pre">&lt;name1&gt;=&lt;expr1&gt;,</span> <span class="pre">&lt;name2&gt;=&lt;expr2&gt;,</span> <span class="pre">..</span></code>. &lt;name&gt; is a field name, &lt;expr&gt; syntax is:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Expression</p></th>
<th class="head"><p>Meaning</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>+-</p></td>
<td><p>Change in sign.</p></td>
</tr>
<tr class="row-odd"><td><p>+-=</p></td>
<td><p>Change in sign, including change from positive or negative to zero.</p></td>
</tr>
<tr class="row-even"><td><p>+-X</p></td>
<td><p>Plus or minus more than X. abs(new - old) &gt; X</p></td>
</tr>
<tr class="row-odd"><td><p>+X-Y</p></td>
<td><p>Plus more than X or minus more than Y. (new - old) &gt; X or (old - new) &gt; Y</p></td>
</tr>
<tr class="row-even"><td><p>+-X=</p></td>
<td><p>Plus or minus X or more. abs(new - old) &gt;= X</p></td>
</tr>
<tr class="row-odd"><td><p>+X-Y=</p></td>
<td><p>Plus X or more, or minus Y or more. (new - old) &gt;= X or (old - new) &gt;= Y</p></td>
</tr>
<tr class="row-even"><td><p>+X[=]</p></td>
<td><p>Positive changes only</p></td>
</tr>
<tr class="row-odd"><td><p>-Y[=]</p></td>
<td><p>Negative changes only</p></td>
</tr>
<tr class="row-even"><td><p>…%</p></td>
<td><p>Percent change. Instead of “(new - old)”, use “100 * (new - old) / old”</p></td>
</tr>
</tbody>
</table>
<p>Some examples follow.</p>
<ul>
<li><p>Report records where the value <code class="docutils literal notranslate"><span class="pre">analysis.e_above_hull</span></code> changes by more than 20% in either direction:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">mgvv</span> <span class="n">diff</span> <span class="o">-</span><span class="n">k</span> <span class="n">task_id</span> <span class="o">--</span><span class="n">numeric</span> <span class="s2">&quot;analysis.e_above_hull=+-20%&quot;</span> <span class="n">prod</span><span class="o">.</span><span class="n">json</span> <span class="n">dev</span><span class="o">.</span><span class="n">json</span>
</pre></div>
</div>
</li>
<li><p>Report records where the value <code class="docutils literal notranslate"><span class="pre">energy</span></code> changes sign:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">mgvv</span> <span class="n">diff</span> <span class="o">-</span><span class="n">k</span> <span class="n">name</span> <span class="o">--</span><span class="n">numeric</span> <span class="s2">&quot;energy=+-&quot;</span> <span class="n">conf</span><span class="o">/</span><span class="n">test1</span><span class="o">.</span><span class="n">json</span> <span class="n">conf</span><span class="o">/</span><span class="n">test2</span><span class="o">.</span><span class="n">json</span>
</pre></div>
</div>
</li>
<li><p>Report records where either the value <code class="docutils literal notranslate"><span class="pre">frequency</span></code> or <code class="docutils literal notranslate"><span class="pre">duration</span></code> change is some quantity or more:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">mgvv</span> <span class="n">diff</span> <span class="o">-</span><span class="n">k</span> <span class="n">somekey</span> <span class="o">--</span><span class="n">numeric</span> <span class="s2">&quot;frequency=+1.0-0.5=, duration=+10-15=&quot;</span> <span class="n">foo</span><span class="o">.</span><span class="n">json</span> <span class="n">bar</span><span class="o">.</span><span class="n">json</span>
</pre></div>
</div>
</li>
</ul>
<p>This option may be combined with any of the other options.</p>
<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-mgvv-diff-p">
<span id="cmdoption-mgvv-diff-properties"></span><span class="sig-name descname"><span class="pre">-p</span></span><span class="sig-prename descclassname"> <span class="pre">PROPS</span></span><span class="sig-prename descclassname"><span class="pre">,</span> </span><span class="sig-name descname"><span class="pre">--properties</span></span><span class="sig-prename descclassname"> <span class="pre">PROPS</span></span><a class="headerlink" href="#cmdoption-mgvv-diff-p" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>Fields with properties that must match, as comma-separated list , e.g ‘<code class="docutils literal notranslate"><span class="pre">these_must,match</span></code>’.</p>
<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-mgvv-diff-P">
<span id="cmdoption-mgvv-diff-print"></span><span class="sig-name descname"><span class="pre">-P</span></span><span class="sig-prename descclassname"></span><span class="sig-prename descclassname"><span class="pre">,</span> </span><span class="sig-name descname"><span class="pre">--print</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-mgvv-diff-P" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>Print report to the console.</p>
<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-mgvv-diff-q">
<span id="cmdoption-mgvv-diff-query"></span><span class="sig-name descname"><span class="pre">-q</span></span><span class="sig-prename descclassname"> <span class="pre">EXPR</span></span><span class="sig-prename descclassname"><span class="pre">,</span> </span><span class="sig-name descname"><span class="pre">--query</span></span><span class="sig-prename descclassname"> <span class="pre">EXPR</span></span><a class="headerlink" href="#cmdoption-mgvv-diff-q" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>Query to filter records before key and value tests.
Uses simplified constraint syntax, from the <a class="reference external" href="http://pythonhosted.org/smoqe/">smoqe package</a>. For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">--</span><span class="n">query</span><span class="o">=</span><span class="s1">&#39;name = &quot;oscar&quot; and grouchiness &gt; 3&#39;</span>
</pre></div>
</div>
<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-mgvv-diff-u">
<span id="cmdoption-mgvv-diff-url"></span><span class="sig-name descname"><span class="pre">-u</span></span><span class="sig-prename descclassname"> <span class="pre">URL</span></span><span class="sig-prename descclassname"><span class="pre">,</span> </span><span class="sig-name descname"><span class="pre">--url</span></span><span class="sig-prename descclassname"> <span class="pre">URL</span></span><a class="headerlink" href="#cmdoption-mgvv-diff-u" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>In HTML reports, make the key into a hyperlink by prefixing with URL.
This can be used to take advantage of clean RESTful URL schemes such as those found in
the Materials Project webpages:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>   <span class="n">mgvv</span> <span class="n">diff</span> <span class="o">-</span><span class="n">k</span> <span class="n">task_id</span> <span class="o">-</span><span class="n">u</span> <span class="s1">&#39;https://materialsproject.org/tasks/&#39;</span>

<span class="o">..</span> <span class="n">option</span><span class="p">::</span> <span class="o">-</span><span class="n">V</span><span class="p">,</span> <span class="o">--</span><span class="n">values</span>

<span class="n">Only</span> <span class="n">report</span> <span class="n">changes</span> <span class="ow">in</span> <span class="n">values</span><span class="p">,</span> <span class="ow">not</span> <span class="n">missing</span> <span class="ow">or</span> <span class="n">added</span> <span class="n">keys</span><span class="o">.</span>
</pre></div>
</div>
</section>
<section id="examples">
<span id="mgvv-diff-examples"></span><h2>Examples<a class="headerlink" href="#examples" title="Permalink to this heading">¶</a></h2>
<p>Let’s say you want to compare the ‘materials’ collection in a development and production database.
You could have two JSON configuration files, <cite>prod.json</cite> and <cite>dev.json</cite> that specified the servers,
user and password, and database and collection names:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># prod database</span>
<span class="p">{</span>
<span class="s2">&quot;host&quot;</span><span class="p">:</span> <span class="s2">&quot;server1.my.domain&quot;</span><span class="p">,</span>
<span class="s2">&quot;database&quot;</span><span class="p">:</span> <span class="s2">&quot;core_prod&quot;</span><span class="p">,</span>
<span class="s2">&quot;readonly_user&quot;</span><span class="p">:</span> <span class="s2">&quot;xxxx&quot;</span><span class="p">,</span>
<span class="s2">&quot;readonly_password&quot;</span><span class="p">:</span> <span class="s2">&quot;yyyy&quot;</span><span class="p">,</span>
<span class="s2">&quot;collection&quot;</span><span class="p">:</span> <span class="s2">&quot;materials&quot;</span>
<span class="p">}</span>

<span class="c1"># dev database</span>
<span class="p">{</span>
<span class="s2">&quot;host&quot;</span><span class="p">:</span> <span class="s2">&quot;server2.my.domain&quot;</span><span class="p">,</span>
<span class="s2">&quot;database&quot;</span><span class="p">:</span> <span class="s2">&quot;core_dev&quot;</span><span class="p">,</span>
<span class="s2">&quot;readonly_user&quot;</span><span class="p">:</span> <span class="s2">&quot;xxxx&quot;</span><span class="p">,</span>
<span class="s2">&quot;readonly_password&quot;</span><span class="p">:</span> <span class="s2">&quot;yyyy&quot;</span><span class="p">,</span>
<span class="s2">&quot;collection&quot;</span><span class="p">:</span> <span class="s2">&quot;materials&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>You could issue this command-line:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">mgvv</span> <span class="n">diff</span> <span class="o">-</span><span class="n">k</span> <span class="n">task_id</span>  <span class="o">-</span><span class="n">p</span> <span class="n">icsd_id</span> <span class="o">-</span><span class="n">v</span> <span class="o">-</span><span class="n">i</span> <span class="n">pretty_formula</span> <span class="n">mdev</span><span class="o">.</span><span class="n">json</span> <span class="n">mprod</span><span class="o">.</span><span class="n">json</span>
</pre></div>
</div>
<p>This compares with the key <cite>task_id</cite> and matches items with the same key on
the property <cite>icsd_id</cite>, adding to the output the value of the field
<cite>pretty_formula</cite>. Because output is to the console, the format will default to
text.</p>
<p>To produce and view an HTML output report instead, just use the <cite>–format</cite> option:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">mgvv</span> <span class="n">diff</span> <span class="o">--</span><span class="nb">format</span> <span class="n">html</span> <span class="o">-</span><span class="n">k</span> <span class="n">task_id</span>  <span class="o">-</span><span class="n">p</span> <span class="n">icsd_id</span> <span class="o">-</span><span class="n">v</span> <span class="o">-</span><span class="n">i</span> <span class="n">pretty_formula</span> <span class="n">mdev</span><span class="o">.</span><span class="n">json</span> <span class="n">mprod</span><span class="o">.</span><span class="n">json</span> <span class="o">&gt;</span> <span class="n">page</span><span class="o">.</span><span class="n">html</span>
<span class="nb">open</span> <span class="n">page</span><span class="o">.</span><span class="n">html</span> <span class="c1"># on OSX, view in a browser</span>
</pre></div>
</div>
<p>To add an email report set the recipient and, optionally, the relay server (default will be localhost):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">mgvv</span> <span class="n">diff</span> <span class="o">-</span><span class="n">e</span> <span class="s2">&quot;me@my.mail.domain/you@your.mail.domain/DB diff&quot;</span> \
    <span class="o">-</span><span class="n">k</span> <span class="n">task_id</span>  <span class="o">-</span><span class="n">p</span> <span class="n">icsd_id</span> <span class="o">-</span><span class="n">v</span> <span class="o">-</span><span class="n">i</span> <span class="n">pretty_formula</span> <span class="n">mdev</span><span class="o">.</span><span class="n">json</span> <span class="n">mprod</span><span class="o">.</span><span class="n">json</span>
</pre></div>
</div>
<p>Note that the third part of the <cite>-e/–email</cite> command, the subject, is optional – but if you leave it out the email will arrive with no subject line.</p>
<p>As you may have noticed, the command-lines begin to get rather complicated. To replace that last example with a configuration file, use instead this command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">mgvv</span> <span class="n">diff</span> <span class="o">--</span><span class="n">file</span> <span class="n">diff</span><span class="o">.</span><span class="n">yaml</span> <span class="n">mdev</span><span class="o">.</span><span class="n">json</span> <span class="n">mprod</span><span class="o">.</span><span class="n">json</span>
</pre></div>
</div>
<p>and then put the options into <cite>diff.yaml</cite> like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">email</span><span class="p">:</span>
    <span class="o">-</span> <span class="s2">&quot;me@my.mail.domain/you@your.mail.domain/DB diff&quot;</span>
<span class="n">key</span><span class="p">:</span> <span class="n">task_id</span>
<span class="n">properties</span><span class="p">:</span>
    <span class="o">-</span> <span class="n">icsd_id</span>
<span class="n">info</span><span class="p">:</span>
    <span class="o">-</span> <span class="n">pretty_formula</span>
</pre></div>
</div>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <div>
    <h3><a href="index.html">Table of Contents</a></h3>
    <ul>
<li><a class="reference internal" href="#">Materials Project Database Validation: mgvv</a><ul>
<li><a class="reference internal" href="#mgvv-validate-subcommand">mgvv validate subcommand</a></li>
<li><a class="reference internal" href="#arguments">Arguments</a></li>
<li><a class="reference internal" href="#options">Options</a></li>
<li><a class="reference internal" href="#configuration-files">Configuration files</a><ul>
<li><a class="reference internal" href="#database-configuration">Database configuration</a></li>
<li><a class="reference internal" href="#email-configuration">Email configuration</a></li>
<li><a class="reference internal" href="#constraint-configuration">Constraint configuration</a></li>
</ul>
</li>
<li><a class="reference internal" href="#constraint-syntax">Constraint syntax</a></li>
<li><a class="reference internal" href="#mgvv-diff-subcommand">mgvv diff subcommand</a></li>
<li><a class="reference internal" href="#id3">Arguments</a></li>
<li><a class="reference internal" href="#id4">Options</a></li>
<li><a class="reference internal" href="#examples">Examples</a></li>
</ul>
</li>
</ul>

  </div><h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
      <li>Previous: <a href="index.html" title="previous chapter">Pymatgen-db</a></li>
      <li>Next: <a href="builders.html" title="next chapter">Database “Builders”</a></li>
  </ul></li>
</ul>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/mgvv.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>

    <div class="footer">
      &copy; Copyright 2016, Shyue Ping Ong, Dan Gunter.
    </div>
<div class="footer">This page uses <a href="http://analytics.google.com/">
Google Analytics</a> to collect statistics. You can disable it by blocking
the JavaScript coming from www.google-analytics.com.
<script type="text/javascript">
  (function() {
    var ga = document.createElement('script');
    ga.src = ('https:' == document.location.protocol ?
              'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    ga.setAttribute('async', 'true');
    document.documentElement.firstChild.appendChild(ga);
  })();
</script>
</div>

  </body>
</html>