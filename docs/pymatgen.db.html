
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>pymatgen.db package &#8212; pymatgen-db 2022.5.20 documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/flasky.css" />
    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <link rel="shortcut icon" href="_static/favicon.ico"/>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="pymatgen.db.alchemy package" href="pymatgen.db.alchemy.html" />
    <link rel="prev" title="Database configuration" href="dbconfig.html" />

   
  
  <link media="only screen and (max-device-width: 480px)" href="_static/small_flask.css" type= "text/css" rel="stylesheet" />
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9">

<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-38991557-1']);
  _gaq.push(['_trackPageview']);
</script>

  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="pymatgen.db.alchemy.html" title="pymatgen.db.alchemy package"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="dbconfig.html" title="Database configuration"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">pymatgen-db 2022.5.20 documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">pymatgen.db package</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="pymatgen-db-package">
<h1>pymatgen.db package<a class="headerlink" href="#pymatgen-db-package" title="Permalink to this headline">¶</a></h1>
<section id="subpackages">
<h2>Subpackages<a class="headerlink" href="#subpackages" title="Permalink to this headline">¶</a></h2>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="pymatgen.db.alchemy.html">pymatgen.db.alchemy package</a><ul>
<li class="toctree-l2"><a class="reference internal" href="pymatgen.db.alchemy.html#subpackages">Subpackages</a><ul class="simple">
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="pymatgen.db.alchemy.html#submodules">Submodules</a></li>
<li class="toctree-l2"><a class="reference internal" href="pymatgen.db.alchemy.html#module-pymatgen.db.alchemy.transmuters">pymatgen.db.alchemy.transmuters module</a></li>
<li class="toctree-l2"><a class="reference internal" href="pymatgen.db.alchemy.html#module-pymatgen.db.alchemy">Module contents</a></li>
</ul>
</li>
</ul>
</div>
</section>
<section id="submodules">
<h2>Submodules<a class="headerlink" href="#submodules" title="Permalink to this headline">¶</a></h2>
</section>
<section id="module-pymatgen.db.config">
<span id="pymatgen-db-config-module"></span><h2>pymatgen.db.config module<a class="headerlink" href="#module-pymatgen.db.config" title="Permalink to this headline">¶</a></h2>
<p>Database configuration functions.
Main class is DBConfig, which encapsulates a database configuration
passed in as a file or object. For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cfg1</span> <span class="o">=</span> <span class="n">DBConfig</span><span class="p">()</span>  <span class="c1"># use defaults</span>
<span class="n">cfg2</span> <span class="o">=</span> <span class="n">DBConfig</span><span class="p">(</span><span class="s2">&quot;/path/to/myfile.json&quot;</span><span class="p">)</span>  <span class="c1"># read from file</span>
<span class="n">f</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;/other/file.json&quot;</span><span class="p">)</span>
<span class="n">cfg3</span> <span class="o">=</span> <span class="n">DBConfig</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>  <span class="c1"># read from file object</span>
<span class="c1"># access dict of parsed conf. settings</span>
<span class="n">settings</span> <span class="o">=</span> <span class="n">cfg1</span><span class="o">.</span><span class="n">settings</span>
</pre></div>
</div>
<dl class="py exception">
<dt class="sig sig-object py" id="pymatgen.db.config.ConfigurationFileError">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">ConfigurationFileError</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filename</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">err</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pymatgen/db/config.html#ConfigurationFileError"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pymatgen.db.config.ConfigurationFileError" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">Exception</span></code></p>
<p>Error for Config File</p>
<p>Init for ConfigurationFileError.</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="pymatgen.db.config.DBConfig">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">DBConfig</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config_file</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">config_dict</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pymatgen/db/config.html#DBConfig"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pymatgen.db.config.DBConfig" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Database configuration.</p>
<p>Constructor.
Settings are created from config_dict, if given,
or parsed config_file, if given, otherwise
the DEFAULT_FILE is tried and if that is not present
the DEFAULT_SETTINGS are used without modification.
:param config_file: Read configuration from this file.
:type config_file: file or str path
:param config_dict: Set configuration from this dictionary.
:raises: ConfigurationFileError if cannot read/parse config_file</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="pymatgen.db.config.DBConfig.ALL_SETTINGS">
<span class="sig-name descname"><span class="pre">ALL_SETTINGS</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">['host',</span> <span class="pre">'port',</span> <span class="pre">'database',</span> <span class="pre">'collection',</span> <span class="pre">'aliases']</span></em><a class="headerlink" href="#pymatgen.db.config.DBConfig.ALL_SETTINGS" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pymatgen.db.config.DBConfig.DEFAULT_FILE">
<span class="sig-name descname"><span class="pre">DEFAULT_FILE</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'db.json'</span></em><a class="headerlink" href="#pymatgen.db.config.DBConfig.DEFAULT_FILE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pymatgen.db.config.DBConfig.DEFAULT_PORT">
<span class="sig-name descname"><span class="pre">DEFAULT_PORT</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">27017</span></em><a class="headerlink" href="#pymatgen.db.config.DBConfig.DEFAULT_PORT" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pymatgen.db.config.DBConfig.DEFAULT_SETTINGS">
<span class="sig-name descname"><span class="pre">DEFAULT_SETTINGS</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">[('host',</span> <span class="pre">'localhost'),</span> <span class="pre">('port',</span> <span class="pre">27017),</span> <span class="pre">('database',</span> <span class="pre">'vasp'),</span> <span class="pre">('aliases',</span> <span class="pre">{})]</span></em><a class="headerlink" href="#pymatgen.db.config.DBConfig.DEFAULT_SETTINGS" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pymatgen.db.config.DBConfig.collection">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">collection</span></span><a class="headerlink" href="#pymatgen.db.config.DBConfig.collection" title="Permalink to this definition">¶</a></dt>
<dd><p>Return collection.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pymatgen.db.config.DBConfig.copy">
<span class="sig-name descname"><span class="pre">copy</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pymatgen/db/config.html#DBConfig.copy"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pymatgen.db.config.DBConfig.copy" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a copy of self (internal settings are copied).</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pymatgen.db.config.DBConfig.dbname">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">dbname</span></span><a class="headerlink" href="#pymatgen.db.config.DBConfig.dbname" title="Permalink to this definition">¶</a></dt>
<dd><p>Name of the database.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pymatgen.db.config.DBConfig.host">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">host</span></span><a class="headerlink" href="#pymatgen.db.config.DBConfig.host" title="Permalink to this definition">¶</a></dt>
<dd><p>Return host</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pymatgen.db.config.DBConfig.password">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">password</span></span><a class="headerlink" href="#pymatgen.db.config.DBConfig.password" title="Permalink to this definition">¶</a></dt>
<dd><p>Return password.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pymatgen.db.config.DBConfig.port">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">port</span></span><a class="headerlink" href="#pymatgen.db.config.DBConfig.port" title="Permalink to this definition">¶</a></dt>
<dd><p>Return port.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pymatgen.db.config.DBConfig.settings">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">settings</span></span><a class="headerlink" href="#pymatgen.db.config.DBConfig.settings" title="Permalink to this definition">¶</a></dt>
<dd><p>Return settings</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pymatgen.db.config.DBConfig.user">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">user</span></span><a class="headerlink" href="#pymatgen.db.config.DBConfig.user" title="Permalink to this definition">¶</a></dt>
<dd><p>Return user.</p>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pymatgen.db.config.auth_aliases">
<span class="sig-name descname"><span class="pre">auth_aliases</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">d</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pymatgen/db/config.html#auth_aliases"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pymatgen.db.config.auth_aliases" title="Permalink to this definition">¶</a></dt>
<dd><p>Interpret user/password aliases.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pymatgen.db.config.get_settings">
<span class="sig-name descname"><span class="pre">get_settings</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">infile</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pymatgen/db/config.html#get_settings"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pymatgen.db.config.get_settings" title="Permalink to this definition">¶</a></dt>
<dd><p>Read settings from input file.
:param infile: Input file for JSON settings.
:type infile: file or str path
:return: Settings parsed from file
:rtype: dict</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pymatgen.db.config.normalize_auth">
<span class="sig-name descname"><span class="pre">normalize_auth</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">settings</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">admin</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">readonly</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">readonly_first</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pymatgen/db/config.html#normalize_auth"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pymatgen.db.config.normalize_auth" title="Permalink to this definition">¶</a></dt>
<dd><p>Transform the readonly/admin user and password to simple user/password,
as expected by QueryEngine. If return value is true, then
admin or readonly password will be in keys “user” and “password”.
:param settings: Connection settings
:type settings: dict
:param admin: Check for admin password
:param readonly: Check for readonly password
:param readonly_first: Check for readonly password before admin
:return: Whether user/password were found
:rtype: bool</p>
</dd></dl>

</section>
<section id="module-pymatgen.db.creator">
<span id="pymatgen-db-creator-module"></span><h2>pymatgen.db.creator module<a class="headerlink" href="#module-pymatgen.db.creator" title="Permalink to this headline">¶</a></h2>
<p>This module defines a Drone to assimilate vasp data and insert it into a
Mongo database.</p>
<dl class="py class">
<dt class="sig sig-object py" id="pymatgen.db.creator.VaspToDbTaskDrone">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">VaspToDbTaskDrone</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">host</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'127.0.0.1'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">port</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">27017</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">database</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'vasp'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">user</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">password</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">collection</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'tasks'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">parse_dos</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">compress_dos</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">parse_projected_eigen</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">simulate_mode</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">additional_fields</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">update_duplicates</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mapi_key</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">use_full_uri</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">runs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pymatgen/db/creator.html#VaspToDbTaskDrone"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pymatgen.db.creator.VaspToDbTaskDrone" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">pymatgen.apps.borg.hive.AbstractDrone</span></code></p>
<p>VaspToDbTaskDrone assimilates directories containing vasp input to
inserted db tasks. This drone is meant ot be used with pymatgen’s
BorgQueen to assimilate entire directory structures and insert them into
a database using Python’s multiprocessing. The current format assumes
standard VASP relaxation runs. If you have other kinds of runs,
you may design your own Drone class based on this one.</p>
<p>There are some restrictions on the valid directory structures:</p>
<blockquote>
<div><ol class="arabic simple">
<li><p>There can be only one vasp run in each directory. Nested directories
are fine.</p></li>
<li><p>Directories designated “relax1”, “relax2” are considered to be
2 parts of an aflow style run.</p></li>
<li><p>Directories containing vasp output with “.relax1” and “.relax2” are
also considered as 2 parts of an aflow style run.</p></li>
</ol>
</div></blockquote>
<p>Constructor.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>host</strong> – Hostname of database machine. Defaults to 127.0.0.1 or
localhost.</p></li>
<li><p><strong>port</strong> – Port for db access. Defaults to mongo’s default of 27017.</p></li>
<li><p><strong>database</strong> – Actual database to access. Defaults to “vasp”.</p></li>
<li><p><strong>user</strong> – User for db access. Requires write access. Defaults to None,
which means no authentication.</p></li>
<li><p><strong>password</strong> – Password for db access. Requires write access. Defaults to
None, which means no authentication.</p></li>
<li><p><strong>collection</strong> – Collection to query. Defaults to “tasks”.</p></li>
<li><p><strong>parse_dos</strong> – Whether to parse the DOS data. Options are True, False, and ‘final’
Defaults to False. If True, all dos will be inserted into a gridfs
collection called dos_fs. If ‘final’, only the last calculation will
be parsed.</p></li>
<li><p><strong>parse_projected_eigen</strong> – Whether to parse the element and orbital projections. Options are True,
False, and ‘final’; Defaults to False. If True, projections will be
parsed for each calculation. If ‘final’, projections for only the last
calculation will be parsed.</p></li>
<li><p><strong>compress_dos</strong> – Whether to compress the DOS data. Valid options are integers 1-9,
corresponding to zlib compression level. 1 is usually adequate.</p></li>
<li><p><strong>simulate_mode</strong> – Allows one to simulate db insertion without actually performing
the insertion.</p></li>
<li><p><strong>additional_fields</strong> – Dict specifying additional fields to append to each doc
inserted into the collection. For example, allows one to add
an author or tags to a whole set of runs for example.</p></li>
<li><p><strong>update_duplicates</strong> – If True, if a duplicate path exists in the collection, the
entire doc is updated. Else, duplicates are skipped.</p></li>
<li><p><strong>mapi_key</strong> – <p>A Materials API key. If this key is supplied,
the insertion code will attempt to use the Materials REST API
to calculate stability data for inserted calculations.
Stability assessment requires a large quantity of materials
data. E.g., to compute the stability of a new LixFeyOz
calculation, you need to the energies of all known
phases in the Li-Fe-O chemical system. Using
the Materials API, we can obtain the pre-calculated data from
the Materials Project.</p>
<p>Go to www.materialsproject.org/profile to generate or obtain
your API key.</p>
</p></li>
<li><p><strong>use_full_uri</strong> – Whether to use full uri path (including hostname) for the
directory name. Defaults to True. If False, only the abs
path will be used.</p></li>
<li><p><strong>runs</strong> – Ordered list of runs to look for e.g. [“relax1”, “relax2”].
Automatically detects whether the runs are stored in the
subfolder or file extension schema.</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="pymatgen.db.creator.VaspToDbTaskDrone.as_dict">
<span class="sig-name descname"><span class="pre">as_dict</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pymatgen/db/creator.html#VaspToDbTaskDrone.as_dict"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pymatgen.db.creator.VaspToDbTaskDrone.as_dict" title="Permalink to this definition">¶</a></dt>
<dd><p>Dict representation.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pymatgen.db.creator.VaspToDbTaskDrone.assimilate">
<span class="sig-name descname"><span class="pre">assimilate</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pymatgen/db/creator.html#VaspToDbTaskDrone.assimilate"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pymatgen.db.creator.VaspToDbTaskDrone.assimilate" title="Permalink to this definition">¶</a></dt>
<dd><p>Parses vasp runs. Then insert the result into the db. and return the
task_id or doc of the insertion.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>If in simulate_mode, the entire doc is returned for debugging
purposes. Else, only the task_id of the inserted doc is returned.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pymatgen.db.creator.VaspToDbTaskDrone.calculate_stability">
<span class="sig-name descname"><span class="pre">calculate_stability</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">d</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pymatgen/db/creator.html#VaspToDbTaskDrone.calculate_stability"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pymatgen.db.creator.VaspToDbTaskDrone.calculate_stability" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate the stability (e_above_hull and decomposes_to) for a entry dict.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pymatgen.db.creator.VaspToDbTaskDrone.convert">
<span class="sig-name descname"><span class="pre">convert</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">d</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pymatgen/db/creator.html#VaspToDbTaskDrone.convert"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pymatgen.db.creator.VaspToDbTaskDrone.convert" title="Permalink to this definition">¶</a></dt>
<dd><p>Just return the dict.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pymatgen.db.creator.VaspToDbTaskDrone.from_dict">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">from_dict</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">d</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pymatgen/db/creator.html#VaspToDbTaskDrone.from_dict"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pymatgen.db.creator.VaspToDbTaskDrone.from_dict" title="Permalink to this definition">¶</a></dt>
<dd><p>From dict</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pymatgen.db.creator.VaspToDbTaskDrone.generate_doc">
<span class="sig-name descname"><span class="pre">generate_doc</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dir_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">vasprun_files</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pymatgen/db/creator.html#VaspToDbTaskDrone.generate_doc"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pymatgen.db.creator.VaspToDbTaskDrone.generate_doc" title="Permalink to this definition">¶</a></dt>
<dd><p>Process aflow style runs, where each run is actually a combination of
two vasp runs.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pymatgen.db.creator.VaspToDbTaskDrone.get_task_doc">
<span class="sig-name descname"><span class="pre">get_task_doc</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pymatgen/db/creator.html#VaspToDbTaskDrone.get_task_doc"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pymatgen.db.creator.VaspToDbTaskDrone.get_task_doc" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the entire task doc for a path, including any post-processing.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pymatgen.db.creator.VaspToDbTaskDrone.get_valid_paths">
<span class="sig-name descname"><span class="pre">get_valid_paths</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pymatgen/db/creator.html#VaspToDbTaskDrone.get_valid_paths"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pymatgen.db.creator.VaspToDbTaskDrone.get_valid_paths" title="Permalink to this definition">¶</a></dt>
<dd><p>There are some restrictions on the valid directory structures:</p>
<ol class="arabic simple">
<li><p>There can be only one vasp run in each directory. Nested directories
are fine.</p></li>
<li><p>Directories designated “relax1”, “relax2” are considered to be 2
parts of an aflow style run.</p></li>
<li><p>Directories containing vasp output with “.relax1” and “.relax2” are
also considered as 2 parts of an aflow style run.</p></li>
</ol>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pymatgen.db.creator.VaspToDbTaskDrone.post_process">
<span class="sig-name descname"><span class="pre">post_process</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dir_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">d</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pymatgen/db/creator.html#VaspToDbTaskDrone.post_process"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pymatgen.db.creator.VaspToDbTaskDrone.post_process" title="Permalink to this definition">¶</a></dt>
<dd><p>Simple post-processing for various files other than the vasprun.xml.
Called by generate_task_doc. Modify this if your runs have other
kinds of processing requirements.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>dir_name</strong> – The dir_name.</p></li>
<li><p><strong>d</strong> – Current doc generated.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pymatgen.db.creator.VaspToDbTaskDrone.process_killed_run">
<span class="sig-name descname"><span class="pre">process_killed_run</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dir_name</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pymatgen/db/creator.html#VaspToDbTaskDrone.process_killed_run"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pymatgen.db.creator.VaspToDbTaskDrone.process_killed_run" title="Permalink to this definition">¶</a></dt>
<dd><p>Process a killed vasp run.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pymatgen.db.creator.VaspToDbTaskDrone.process_vasprun">
<span class="sig-name descname"><span class="pre">process_vasprun</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dir_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">taskname</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filename</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pymatgen/db/creator.html#VaspToDbTaskDrone.process_vasprun"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pymatgen.db.creator.VaspToDbTaskDrone.process_vasprun" title="Permalink to this definition">¶</a></dt>
<dd><p>Process a vasprun.xml file.</p>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pymatgen.db.creator.contains_vasp_input">
<span class="sig-name descname"><span class="pre">contains_vasp_input</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dir_name</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pymatgen/db/creator.html#contains_vasp_input"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pymatgen.db.creator.contains_vasp_input" title="Permalink to this definition">¶</a></dt>
<dd><p>Checks if a directory contains valid VASP input.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>dir_name</strong> – Directory name to check.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>True if directory contains all four VASP input files (INCAR, POSCAR,
KPOINTS and POTCAR).</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pymatgen.db.creator.get_basic_analysis_and_error_checks">
<span class="sig-name descname"><span class="pre">get_basic_analysis_and_error_checks</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">d</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_force_threshold</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.5</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">volume_change_threshold</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.2</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pymatgen/db/creator.html#get_basic_analysis_and_error_checks"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pymatgen.db.creator.get_basic_analysis_and_error_checks" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate basic analysis and error checks data for a run.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pymatgen.db.creator.get_coordination_numbers">
<span class="sig-name descname"><span class="pre">get_coordination_numbers</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">d</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pymatgen/db/creator.html#get_coordination_numbers"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pymatgen.db.creator.get_coordination_numbers" title="Permalink to this definition">¶</a></dt>
<dd><p>Helper method to get the coordination number of all sites in the final
structure from a run.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>d</strong> – Run dict generated by VaspToDbTaskDrone.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>site_dict,
“coordination”: number}, …].</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Coordination numbers as a list of dict of [{“site”</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pymatgen.db.creator.get_uri">
<span class="sig-name descname"><span class="pre">get_uri</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dir_name</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pymatgen/db/creator.html#get_uri"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pymatgen.db.creator.get_uri" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the URI path for a directory. This allows files hosted on
different file servers to have distinct locations.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>dir_name</strong> – A directory name.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>/full/path/of/dir_name.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Full URI path, e.g., fileserver.host.com</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="module-pymatgen.db.matproj">
<span id="pymatgen-db-matproj-module"></span><h2>pymatgen.db.matproj module<a class="headerlink" href="#module-pymatgen.db.matproj" title="Permalink to this headline">¶</a></h2>
<p>A module for replicating the MP database creator.</p>
<p>See <a class="reference external" href="https://medium.com/&#64;shyuep/a-local-materials-project-database-1ea909430c95">https://medium.com/&#64;shyuep/a-local-materials-project-database-1ea909430c95</a></p>
<dl class="py class">
<dt class="sig sig-object py" id="pymatgen.db.matproj.MPDB">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">MPDB</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pymatgen/db/matproj.html#MPDB"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pymatgen.db.matproj.MPDB" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>This module allows you to create a local MP database based on ComputedStructureEntries.</p>
<p>&#64;param args: Pass through to MongoClient. E.g., you can create a connection using uri strings, etc.
&#64;param kwargs: Pass through to MongoClient. E.g., you can create a connection using uri strings, etc.</p>
<dl class="py method">
<dt class="sig sig-object py" id="pymatgen.db.matproj.MPDB.create">
<span class="sig-name descname"><span class="pre">create</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">criteria</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">property_data</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">list</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pymatgen/db/matproj.html#MPDB.create"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pymatgen.db.matproj.MPDB.create" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates the database. Typically only used once.</p>
<dl class="simple">
<dt>&#64;param criteria: Criteria passed to MPRester.get_entries to obtain the entries. None means you get the entire</dt><dd><p>MP database.</p>
</dd>
</dl>
<p>&#64;param property_data: List of additional property data to obtain. These are stored in the data.* keys.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pymatgen.db.matproj.MPDB.get_entries_in_chemsys">
<span class="sig-name descname"><span class="pre">get_entries_in_chemsys</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">elements</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">additional_criteria</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pymatgen/db/matproj.html#MPDB.get_entries_in_chemsys"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pymatgen.db.matproj.MPDB.get_entries_in_chemsys" title="Permalink to this definition">¶</a></dt>
<dd><p>Helper method to get a list of ComputedEntries in a chemical system. For example, elements = [“Li”, “Fe”, “O”]
will return a list of all entries in the Li-Fe-O chemical system, i.e., all LixOy, FexOy, LixFey, LixFeyOz,
Li, Fe and O phases. Extremely useful for creating phase diagrams of entire chemical systems.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>elements</strong> (<em>str</em><em> or </em><em>[</em><em>str</em><em>]</em>) – Chemical system string comprising element
symbols separated by dashes, e.g., “Li-Fe-O” or List of element
symbols, e.g., [“Li”, “Fe”, “O”].</p></li>
<li><p><strong>additional_criteria</strong> (<em>dict</em>) – Any additional criteria to pass. For instance, if you are only interested in
stable entries, you can pass {“e_above_hull”: {“$lte”: 0.001}}.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>List of ComputedStructureEntries.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
<section id="module-pymatgen.db.query_engine">
<span id="pymatgen-db-query-engine-module"></span><h2>pymatgen.db.query_engine module<a class="headerlink" href="#module-pymatgen.db.query_engine" title="Permalink to this headline">¶</a></h2>
<p>This module provides a QueryEngine that simplifies queries for Mongo databases
generated using hive.</p>
<dl class="py class">
<dt class="sig sig-object py" id="pymatgen.db.query_engine.QueryEngine">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">QueryEngine</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">host</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'127.0.0.1'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">port</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">27017</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">database</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'vasp'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">user</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">password</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">collection</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'tasks'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">aliases_config</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">default_properties</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">query_post</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">result_post</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">connection</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">replicaset</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">ignore</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pymatgen/db/query_engine.html#QueryEngine"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pymatgen.db.query_engine.QueryEngine" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>This class defines a QueryEngine interface to a Mongo Collection based on
a set of aliases. This query engine also provides convenient translation
between various pymatgen objects and database objects.</p>
<p>The major difference between the QueryEngine’s query() method and pymongo’s
find() method is the treatment of nested fields. QueryEngine’s query
will map the final result to a root level string, while pymmongo will
return the doc as is. For example, let’s say you have a document
that is of the following form:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span><span class="s2">&quot;a&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;b&quot;</span> <span class="p">:</span> <span class="mi">1</span><span class="p">}}</span>
</pre></div>
</div>
<p>Using pymongo.find({}, fields=[“a.b”]), you will get a doc where you need
to do doc[“a”][“b”] to access the final result (1). Using
QueryEngine.query(properties=[“a.b”], you will obtain a result that can be
accessed simply as doc[“a.b”].</p>
<p>Constructor.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>host</strong> (<em>str</em>) – Hostname of database machine.</p></li>
<li><p><strong>port</strong> (<em>int</em>) – Port for db access.</p></li>
<li><p><strong>database</strong> (<em>str</em>) – Name of database to access.</p></li>
<li><p><strong>user</strong> (<em>str</em>) – User for db access. <cite>None</cite> means no authentication.</p></li>
<li><p><strong>password</strong> (<em>str</em>) – Password for db access. <cite>None</cite> means no auth.</p></li>
<li><p><strong>collection</strong> (<em>str</em>) – Collection to query. Defaults to “tasks”.</p></li>
<li><p><strong>connection</strong> (<em>pymongo.Connection</em>) – If given, ignore ‘host’ and ‘port’
and use existing connection.</p></li>
<li><p><strong>aliases_config</strong> (<em>dict</em>) – <p>An alias dict to use. Defaults to None, which means the default
aliases defined in “aliases.json” is used. The aliases config
should be of the following format:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;aliases&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;e_above_hull&quot;</span><span class="p">:</span> <span class="s2">&quot;analysis.e_above_hull&quot;</span><span class="p">,</span>
        <span class="s2">&quot;energy&quot;</span><span class="p">:</span> <span class="s2">&quot;output.final_energy&quot;</span><span class="p">,</span>
        <span class="o">....</span>
    <span class="p">},</span>
    <span class="s2">&quot;defaults&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;state&quot;</span><span class="p">:</span> <span class="s2">&quot;successful&quot;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<dl class="simple">
<dt>aliases (dict): Keys are the incoming property, values are the</dt><dd><p>property it will be translated to. This makes it easier
to organize the doc format in a way that is different from the
query format.</p>
</dd>
<dt>defaults (dict): Criteria that should be applied</dt><dd><p>by default to all queries. For example, a collection may
contain data from both successful and unsuccessful runs but
for most querying purposes, you may want just successful runs
only. Note that defaults do not affect explicitly specified
criteria, i.e., if you suppy a query for {“state”: “killed”},
this will override the default for {“state”: “successful”}.</p>
</dd>
</dl>
</p></li>
<li><p><strong>default_properties</strong> (<em>list</em>) – Property names (strings) to use by
default, if no <cite>properties</cite> are given to query().</p></li>
<li><p><strong>query_post</strong> (<em>list</em>) – Functions to post-process the <cite>criteria</cite> passed
to <cite>query()</cite>, after aliases are resolved.
Function takes two args, the criteria dict and list of
result properties. Both may be modified in-place.</p></li>
<li><p><strong>result_post</strong> (<em>list</em>) – Functions to post-process the cursor records.
Function takes one arg, the document for the current record,
that is modified in-place.</p></li>
</ul>
</dd>
</dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="pymatgen.db.query_engine.QueryEngine.ALIASES_CONFIG_KEY">
<span class="sig-name descname"><span class="pre">ALIASES_CONFIG_KEY</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'aliases_config'</span></em><a class="headerlink" href="#pymatgen.db.query_engine.QueryEngine.ALIASES_CONFIG_KEY" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pymatgen.db.query_engine.QueryEngine.COLLECTION_KEY">
<span class="sig-name descname"><span class="pre">COLLECTION_KEY</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'collection'</span></em><a class="headerlink" href="#pymatgen.db.query_engine.QueryEngine.COLLECTION_KEY" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pymatgen.db.query_engine.QueryEngine.DB_KEY">
<span class="sig-name descname"><span class="pre">DB_KEY</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'database'</span></em><a class="headerlink" href="#pymatgen.db.query_engine.QueryEngine.DB_KEY" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pymatgen.db.query_engine.QueryEngine.HOST_KEY">
<span class="sig-name descname"><span class="pre">HOST_KEY</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'host'</span></em><a class="headerlink" href="#pymatgen.db.query_engine.QueryEngine.HOST_KEY" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pymatgen.db.query_engine.QueryEngine.PASSWORD_KEY">
<span class="sig-name descname"><span class="pre">PASSWORD_KEY</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'password'</span></em><a class="headerlink" href="#pymatgen.db.query_engine.QueryEngine.PASSWORD_KEY" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pymatgen.db.query_engine.QueryEngine.PORT_KEY">
<span class="sig-name descname"><span class="pre">PORT_KEY</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'port'</span></em><a class="headerlink" href="#pymatgen.db.query_engine.QueryEngine.PORT_KEY" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pymatgen.db.query_engine.QueryEngine.USER_KEY">
<span class="sig-name descname"><span class="pre">USER_KEY</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'user'</span></em><a class="headerlink" href="#pymatgen.db.query_engine.QueryEngine.USER_KEY" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pymatgen.db.query_engine.QueryEngine.aliases">
<span class="sig-name descname"><span class="pre">aliases</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#pymatgen.db.query_engine.QueryEngine.aliases" title="Permalink to this definition">¶</a></dt>
<dd><p>See <cite>aliases</cite> arg to constructor</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pymatgen.db.query_engine.QueryEngine.close">
<span class="sig-name descname"><span class="pre">close</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pymatgen/db/query_engine.html#QueryEngine.close"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pymatgen.db.query_engine.QueryEngine.close" title="Permalink to this definition">¶</a></dt>
<dd><p>Disconnects the connection.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pymatgen.db.query_engine.QueryEngine.collection_name">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">collection_name</span></span><a class="headerlink" href="#pymatgen.db.query_engine.QueryEngine.collection_name" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns collection name.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pymatgen.db.query_engine.QueryEngine.default_criteria">
<span class="sig-name descname"><span class="pre">default_criteria</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#pymatgen.db.query_engine.QueryEngine.default_criteria" title="Permalink to this definition">¶</a></dt>
<dd><p>See <cite>default_criteria</cite> arg to constructor</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pymatgen.db.query_engine.QueryEngine.default_properties">
<span class="sig-name descname"><span class="pre">default_properties</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#pymatgen.db.query_engine.QueryEngine.default_properties" title="Permalink to this definition">¶</a></dt>
<dd><p>See <cite>default_properties</cite> arg to constructor</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pymatgen.db.query_engine.QueryEngine.ensure_index">
<span class="sig-name descname"><span class="pre">ensure_index</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">unique</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pymatgen/db/query_engine.html#QueryEngine.ensure_index"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pymatgen.db.query_engine.QueryEngine.ensure_index" title="Permalink to this definition">¶</a></dt>
<dd><p>Wrapper for pymongo.Collection.ensure_index</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pymatgen.db.query_engine.QueryEngine.from_config">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">from_config</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config_file</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">use_admin</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pymatgen/db/query_engine.html#QueryEngine.from_config"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pymatgen.db.query_engine.QueryEngine.from_config" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize a QueryEngine from a JSON config file generated using mgdb
init.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>config_file</strong> – Filename of config file.</p></li>
<li><p><strong>use_admin</strong> – If True, the admin user and password in the config file is
used. Otherwise, the readonly_user and password is used.
Defaults to False.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>QueryEngine</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pymatgen.db.query_engine.QueryEngine.get_dos_from_id">
<span class="sig-name descname"><span class="pre">get_dos_from_id</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">task_id</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pymatgen/db/query_engine.html#QueryEngine.get_dos_from_id"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pymatgen.db.query_engine.QueryEngine.get_dos_from_id" title="Permalink to this definition">¶</a></dt>
<dd><p>Overrides the get_dos_from_id for the MIT gridfs format.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pymatgen.db.query_engine.QueryEngine.get_entries">
<span class="sig-name descname"><span class="pre">get_entries</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">criteria</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">inc_structure</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">optional_data</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pymatgen/db/query_engine.html#QueryEngine.get_entries"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pymatgen.db.query_engine.QueryEngine.get_entries" title="Permalink to this definition">¶</a></dt>
<dd><p>Get ComputedEntries satisfying a particular criteria.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The get_entries_in_system and get_entries  methods should be used
with care. In essence, all entries, GGA, GGA+U or otherwise,
are returned.  The dataset is very heterogeneous and not
directly comparable.  It is highly recommended that you perform
post-processing using pymatgen.entries.compatibility.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>criteria</strong> – Criteria obeying the same syntax as query.</p></li>
<li><p><strong>inc_structure</strong> – Optional parameter as to whether to include a structure with
the ComputedEntry. Defaults to False. Use with care - including
structures with a large number of entries can potentially slow
down your code to a crawl.</p></li>
<li><p><strong>optional_data</strong> – Optional data to include with the entry. This allows the data
to be access via entry.data[key].</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>List of pymatgen.entries.ComputedEntries satisfying criteria.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pymatgen.db.query_engine.QueryEngine.get_entries_in_system">
<span class="sig-name descname"><span class="pre">get_entries_in_system</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">elements</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">inc_structure</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">optional_data</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">additional_criteria</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pymatgen/db/query_engine.html#QueryEngine.get_entries_in_system"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pymatgen.db.query_engine.QueryEngine.get_entries_in_system" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets all entries in a chemical system, e.g. Li-Fe-O will return all
Li-O, Fe-O, Li-Fe, Li-Fe-O compounds.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The get_entries_in_system and get_entries  methods should be used
with care. In essence, all entries, GGA, GGA+U or otherwise,
are returned.  The dataset is very heterogeneous and not
directly comparable.  It is highly recommended that you perform
post-processing using pymatgen.entries.compatibility.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>elements</strong> – Sequence of element symbols, e.g. [‘Li’,’Fe’,’O’]</p></li>
<li><p><strong>inc_structure</strong> – Optional parameter as to whether to include a structure with
the ComputedEntry. Defaults to False. Use with care - including
structures with a large number of entries can potentially slow
down your code to a crawl.</p></li>
<li><p><strong>optional_data</strong> – Optional data to include with the entry. This allows the data
to be access via entry.data[key].</p></li>
<li><p><strong>additional_criteria</strong> – Added ability to provide additional criteria other than just
the chemical system.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>List of ComputedEntries in the chemical system.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pymatgen.db.query_engine.QueryEngine.get_structure_from_id">
<span class="sig-name descname"><span class="pre">get_structure_from_id</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">task_id</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">final_structure</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pymatgen/db/query_engine.html#QueryEngine.get_structure_from_id"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pymatgen.db.query_engine.QueryEngine.get_structure_from_id" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a structure from the database given the task id.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>task_id</strong> – The task_id to query for.</p></li>
<li><p><strong>final_structure</strong> – Whether to obtain the final or initial structure. Defaults to
True.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pymatgen.db.query_engine.QueryEngine.query">
<span class="sig-name descname"><span class="pre">query</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">properties</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">criteria</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">distinct_key</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pymatgen/db/query_engine.html#QueryEngine.query"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pymatgen.db.query_engine.QueryEngine.query" title="Permalink to this definition">¶</a></dt>
<dd><p>Convenience method for database access.  All properties and criteria
can be specified using simplified names defined in Aliases.  You can
use the supported_properties property to get the list of supported
properties.</p>
<p>Results are returned as an iterator of dicts to ensure memory and cpu
efficiency.</p>
<p>Note that the dict returned have keys also in the simplified names
form, not in the mongo format. For example, if you query for
“analysis.e_above_hull”, the returned result must be accessed as
r[‘analysis.e_above_hull’] instead of mongo’s
r[‘analysis’][‘e_above_hull’]. This is a <em>feature</em> of the query engine
to allow simple access to deeply nested docs without having to resort
to some recursion to go deep into the result.</p>
<p>However, if you query for ‘analysis’, the entire ‘analysis’ key is
returned as r[‘analysis’] and then the subkeys can be accessed in the
usual form, i.e., r[‘analysis’][‘e_above_hull’]</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>properties</strong> – Properties to query for. Defaults to None which means all supported properties.</p></li>
<li><p><strong>criteria</strong> – Criteria to query for as a dict.</p></li>
<li><p><strong>distinct_key</strong> – If not None, the key for which to get distinct results</p></li>
<li><p><strong>**kwargs</strong> – Other kwargs supported by pymongo.collection.find.
Useful examples are limit, skip, sort, etc.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A QueryResults Iterable, which is somewhat like pymongo’s
cursor except that it performs mapping. In general, the dev does
not need to concern himself with the form. It is sufficient to know
that the results are in the form of an iterable of dicts.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pymatgen.db.query_engine.QueryEngine.query_one">
<span class="sig-name descname"><span class="pre">query_one</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pymatgen/db/query_engine.html#QueryEngine.query_one"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pymatgen.db.query_engine.QueryEngine.query_one" title="Permalink to this definition">¶</a></dt>
<dd><p>Return first document from <a class="reference internal" href="#pymatgen.db.query_engine.QueryEngine.query" title="pymatgen.db.query_engine.QueryEngine.query"><code class="xref py py-meth docutils literal notranslate"><span class="pre">query()</span></code></a>, with same parameters.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pymatgen.db.query_engine.QueryEngine.query_post">
<span class="sig-name descname"><span class="pre">query_post</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#pymatgen.db.query_engine.QueryEngine.query_post" title="Permalink to this definition">¶</a></dt>
<dd><p>See <cite>query_post</cite> arg to constructor</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pymatgen.db.query_engine.QueryEngine.result_post">
<span class="sig-name descname"><span class="pre">result_post</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#pymatgen.db.query_engine.QueryEngine.result_post" title="Permalink to this definition">¶</a></dt>
<dd><p>See <cite>result_post</cite> arg to constructor</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pymatgen.db.query_engine.QueryEngine.set_aliases_and_defaults">
<span class="sig-name descname"><span class="pre">set_aliases_and_defaults</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">aliases_config</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">default_properties</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pymatgen/db/query_engine.html#QueryEngine.set_aliases_and_defaults"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pymatgen.db.query_engine.QueryEngine.set_aliases_and_defaults" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the alias config and defaults to use. Typically used when
switching to a collection with a different schema.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>aliases_config</strong> – An alias dict to use. Defaults to None, which means the default
aliases defined in “aliases.json” is used. See constructor
for format.</p></li>
<li><p><strong>default_properties</strong> – List of property names (strings) to use by default, if no
properties are given to the ‘properties’ argument of
query().</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py exception">
<dt class="sig sig-object py" id="pymatgen.db.query_engine.QueryError">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">QueryError</span></span><a class="reference internal" href="_modules/pymatgen/db/query_engine.html#QueryError"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pymatgen.db.query_engine.QueryError" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">Exception</span></code></p>
<p>Exception class for errors occuring during queries.</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="pymatgen.db.query_engine.QueryListResults">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">QueryListResults</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">prop_dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">result_cursor</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">postprocess</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pymatgen/db/query_engine.html#QueryListResults"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pymatgen.db.query_engine.QueryListResults" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#pymatgen.db.query_engine.QueryResults" title="pymatgen.db.query_engine.QueryResults"><code class="xref py py-class docutils literal notranslate"><span class="pre">pymatgen.db.query_engine.QueryResults</span></code></a></p>
<p>Set of QueryResults on a list instead of a MongoDB cursor.</p>
<p>Constructor.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>prop_dict</strong> – Properties</p></li>
<li><p><strong>result_cursor</strong> – Iterable returning records</p></li>
<li><p><strong>postprocess</strong> – List of functions, each taking a record and
modifying it in-place, or None, or an empty list</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="pymatgen.db.query_engine.QueryListResults.clone">
<span class="sig-name descname"><span class="pre">clone</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pymatgen/db/query_engine.html#QueryListResults.clone"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pymatgen.db.query_engine.QueryListResults.clone" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a clone of the QueryListResults.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="pymatgen.db.query_engine.QueryResults">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">QueryResults</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">prop_dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">result_cursor</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">postprocess</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pymatgen/db/query_engine.html#QueryResults"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pymatgen.db.query_engine.QueryResults" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">collections.abc.Iterable</span></code></p>
<p>Iterable wrapper for results from QueryEngine.
Like pymongo’s cursor, this object should generally not be instantiated,
but should be obtained from a queryengine.
It delegates many attributes to the underlying pymongo cursor, and should
support nearly all cursor like attributes such as count(), explain(),
hint(), etc. Please see pymongo cursor documentation for details.</p>
<p>Constructor.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>prop_dict</strong> – Properties</p></li>
<li><p><strong>result_cursor</strong> – Iterable returning records</p></li>
<li><p><strong>postprocess</strong> – List of functions, each taking a record and
modifying it in-place, or None, or an empty list</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="pymatgen.db.query_engine.QueryResults.clone">
<span class="sig-name descname"><span class="pre">clone</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pymatgen/db/query_engine.html#QueryResults.clone"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pymatgen.db.query_engine.QueryResults.clone" title="Permalink to this definition">¶</a></dt>
<dd><p>Provide a clone of the QueryResults.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pymatgen.db.query_engine.QueryResults.from_cursor">
<span class="sig-name descname"><span class="pre">from_cursor</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cursor</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pymatgen/db/query_engine.html#QueryResults.from_cursor"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pymatgen.db.query_engine.QueryResults.from_cursor" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a QueryResults object from a cursor object</p>
</dd></dl>

</dd></dl>

</section>
<section id="module-pymatgen.db.util">
<span id="pymatgen-db-util-module"></span><h2>pymatgen.db.util module<a class="headerlink" href="#module-pymatgen.db.util" title="Permalink to this headline">¶</a></h2>
<p>Utility functions used across scripts.</p>
<dl class="py class">
<dt class="sig sig-object py" id="pymatgen.db.util.MongoJSONEncoder">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">MongoJSONEncoder</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">skipkeys</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ensure_ascii</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">check_circular</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">allow_nan</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sort_keys</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">indent</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">separators</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">default</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pymatgen/db/util.html#MongoJSONEncoder"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pymatgen.db.util.MongoJSONEncoder" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">json.encoder.JSONEncoder</span></code></p>
<p>JSON encoder to support ObjectIDs and datetime used in Mongo.</p>
<p>Constructor for JSONEncoder, with sensible defaults.</p>
<p>If skipkeys is false, then it is a TypeError to attempt
encoding of keys that are not str, int, float or None.  If
skipkeys is True, such items are simply skipped.</p>
<p>If ensure_ascii is true, the output is guaranteed to be str
objects with all incoming non-ASCII characters escaped.  If
ensure_ascii is false, the output can contain non-ASCII characters.</p>
<p>If check_circular is true, then lists, dicts, and custom encoded
objects will be checked for circular references during encoding to
prevent an infinite recursion (which would cause an RecursionError).
Otherwise, no such check takes place.</p>
<p>If allow_nan is true, then NaN, Infinity, and -Infinity will be
encoded as such.  This behavior is not JSON specification compliant,
but is consistent with most JavaScript based encoders and decoders.
Otherwise, it will be a ValueError to encode such floats.</p>
<p>If sort_keys is true, then the output of dictionaries will be
sorted by key; this is useful for regression tests to ensure
that JSON serializations can be compared on a day-to-day basis.</p>
<p>If indent is a non-negative integer, then JSON array
elements and object members will be pretty-printed with that
indent level.  An indent level of 0 will only insert newlines.
None is the most compact representation.</p>
<p>If specified, separators should be an (item_separator, key_separator)
tuple.  The default is (’, ‘, ‘: ‘) if <em>indent</em> is <code class="docutils literal notranslate"><span class="pre">None</span></code> and
(‘,’, ‘: ‘) otherwise.  To get the most compact JSON representation,
you should specify (‘,’, ‘:’) to eliminate whitespace.</p>
<p>If specified, default is a function that gets called for objects
that can’t otherwise be serialized.  It should return a JSON encodable
version of the object or raise a <code class="docutils literal notranslate"><span class="pre">TypeError</span></code>.</p>
<dl class="py method">
<dt class="sig sig-object py" id="pymatgen.db.util.MongoJSONEncoder.default">
<span class="sig-name descname"><span class="pre">default</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">o</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pymatgen/db/util.html#MongoJSONEncoder.default"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pymatgen.db.util.MongoJSONEncoder.default" title="Permalink to this definition">¶</a></dt>
<dd><p>Override default to support ObjectID and datetime.</p>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pymatgen.db.util.collection_keys">
<span class="sig-name descname"><span class="pre">collection_keys</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">coll</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sep</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'.'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pymatgen/db/util.html#collection_keys"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pymatgen.db.util.collection_keys" title="Permalink to this definition">¶</a></dt>
<dd><p>Get a list of all (including nested) keys in a collection.
Examines the first document in the collection.
:param sep: Separator for nested keys
:return: List of str</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pymatgen.db.util.get_collection">
<span class="sig-name descname"><span class="pre">get_collection</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config_file</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">admin</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">settings</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pymatgen/db/util.html#get_collection"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pymatgen.db.util.get_collection" title="Permalink to this definition">¶</a></dt>
<dd><p>Get a collection from a config file.
:param config_file Path to filename
:param admin Whether to use admin credentials. Default to False.
:param settings Whether to override settings or obtain from config file (None).</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pymatgen.db.util.get_database">
<span class="sig-name descname"><span class="pre">get_database</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config_file</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">settings</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">admin</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pymatgen/db/util.html#get_database"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pymatgen.db.util.get_database" title="Permalink to this definition">¶</a></dt>
<dd><p>Get a database object from a config file.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pymatgen.db.util.get_settings">
<span class="sig-name descname"><span class="pre">get_settings</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config_file</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pymatgen/db/util.html#get_settings"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pymatgen.db.util.get_settings" title="Permalink to this definition">¶</a></dt>
<dd><p>Get settings from file.</p>
</dd></dl>

</section>
<section id="module-pymatgen.db">
<span id="module-contents"></span><h2>Module contents<a class="headerlink" href="#module-pymatgen.db" title="Permalink to this headline">¶</a></h2>
<p>Pymatgen-db is a database add-on for the Python Materials Genomics (pymatgen)
materials analysis library. It enables the creation of Materials
Project-style MongoDB databases for management of materials data and
provides a clean and intuitive web ui for exploring that data. A query engine
is also provided to enable the easy translation of MongoDB docs to useful
pymatgen objects for analysis purposes.</p>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <div>
    <h3><a href="index.html">Table of Contents</a></h3>
    <ul>
<li><a class="reference internal" href="#">pymatgen.db package</a><ul>
<li><a class="reference internal" href="#subpackages">Subpackages</a></li>
<li><a class="reference internal" href="#submodules">Submodules</a></li>
<li><a class="reference internal" href="#module-pymatgen.db.config">pymatgen.db.config module</a></li>
<li><a class="reference internal" href="#module-pymatgen.db.creator">pymatgen.db.creator module</a></li>
<li><a class="reference internal" href="#module-pymatgen.db.matproj">pymatgen.db.matproj module</a></li>
<li><a class="reference internal" href="#module-pymatgen.db.query_engine">pymatgen.db.query_engine module</a></li>
<li><a class="reference internal" href="#module-pymatgen.db.util">pymatgen.db.util module</a></li>
<li><a class="reference internal" href="#module-pymatgen.db">Module contents</a></li>
</ul>
</li>
</ul>

  </div><h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
      <li>Previous: <a href="dbconfig.html" title="previous chapter">Database configuration</a></li>
      <li>Next: <a href="pymatgen.db.alchemy.html" title="next chapter">pymatgen.db.alchemy package</a></li>
  </ul></li>
</ul>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/pymatgen.db.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>

    <div class="footer">
      &copy; Copyright 2016, Shyue Ping Ong, Dan Gunter.
    </div>
<div class="footer">This page uses <a href="http://analytics.google.com/">
Google Analytics</a> to collect statistics. You can disable it by blocking
the JavaScript coming from www.google-analytics.com.
<script type="text/javascript">
  (function() {
    var ga = document.createElement('script');
    ga.src = ('https:' == document.location.protocol ?
              'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    ga.setAttribute('async', 'true');
    document.documentElement.firstChild.appendChild(ga);
  })();
</script>
</div>

  </body>
</html>